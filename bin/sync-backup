#!/bin/bash

case "$HOSTNAME" in
  ocelot)
    BACKUP="/mnt/slack"
    DIRS=( backups books documents images music photos scrapbook sound )
    ;;
  *)
    echo "Unsupported host $HOSTNAME"
    exit 1
    ;;
esac

if ! mountpoint -q "$BACKUP"; then
  echo "$BACKUP is not mounted."
  exit 1
fi

cd /slack || exit 1

echo
echo -e " \e[1;32m‚óè\e[22m \e[22mSyncing backups to \e[1m$BACKUP\e[22m...\e[0m"

rsync -av --update --delete \
  "${DIRS[@]}" "$BACKUP" "$@"

echo
