#!/bin/bash

case "$HOSTNAME" in
  ocelot)  geometry="175x89+1920+0";;
  schtube) geometry="87x42+961+0";;
  meerkat)
    read -r _screen _screens x _y xoff _yoff < <(xmonitorinfo)

    if [ "${xoff}" = "0" ]; then
      scaling=$( dconf read /org/gnome/desktop/interface/text-scaling-factor )

      if [[ "$scaling" =~ ^1\.(4|39*)$ ]]; then
        geometry="107x55+1280+0"
      fi
    elif [ "$x" = "3840" ]; then
      geometry="160x85+$((xoff+1920))+0"
    elif [ "$x" = "3440" ]; then
      geometry="214x78+$((xoff+1920))+0"
    elif [ "$x" = "2560" ]; then
      geometry="142x70+$((xoff+1920))+0"
    fi
    ;;
esac

exec tilix --geometry="$geometry" "$@"

# font=$( dconf read /org/gnome/desktop/interface/monospace-font-name | tr -d "'" )
# font_size=${font##* }
# font=${font% [1-9]*}
#
# position="50%,0"
# screen="active"
# cols=nil
# rows=nil
#
# case "$HOSTNAME" in
#   ocelot)
#     cols=175
#     rows=89
#     ;;
#   schtube)
#     cols=88
#     rows=43
#     ;;
#   meerkat)
#     read -r screen _screens x _y xoff _yoff < <(xmonitorinfo)
#
#     if [ "${xoff}" = "0" ]; then
#       scaling=$( dconf read /org/gnome/desktop/interface/text-scaling-factor )
#
#       if [[ "$scaling" =~ ^1\.(4|39*)$ ]]; then
#         cols=107
#         rows=58
#       fi
#     elif [ "$x" = "3840" ]; then
#       geometry="160x85+$((xoff+1920))+0"
#     elif [ "$x" = "3440" ]; then
#       cols=216
#       rows=79
#     elif [ "$x" = "2560" ]; then
#       geometry="142x70+$((xoff+1920))+0"
#     fi
#     ;;
# esac
#
# exec wezterm \
#   --config font="wezterm.font('$font')" \
#   --config font_size="$font_size" \
#   --config initial_rows="$rows" \
#   --config initial_cols="$cols" \
#   start --position="$screen:$position" \
#   "$@"
